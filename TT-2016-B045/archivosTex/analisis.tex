
El capítulo de análisis dentro de este documento, contiene todo el proceso que corresponde a la etapa de análisis de la metodología en cascada. Dicho análisis comprende la presentación del estudio de factibilidad de este proyecto, factibilidad técnica, factibilidad operativa y económica, además de un análisis de riesgos posibles en la realización de este proyecto. Asimismo, se presenta la arquitectura que tendrá el protocolo criptográfico, la descripción de todos los procesos involucrados en el funcionamiento de este protocolo junto con los actores correspondientes a cada proceso. Como parte final de este capítulo, se encontrarán los requerimientos funcionales que este protocolo debe cubrir y de igual forma los requerimientos funcionales que estarán presentes dentro del proyecto. 






\section{Estudio de Factibilidad}

Como se expuso anteriormente, el protocolo criptográfico que se presenta en este trabajo terminal da como resultados grandes e importantes beneficios en cuanto a la optimización de espacio de memoria en la nube y garantiza la seguridad e integridad de los datos de usuarios registrados en la nube. Hasta ahora se tiene muy claro que este trabajo terminal, evitará la duplicación de archivos en la nube garantizando la integridad y confidencialidad tanto de los archivos almacenados como de los usuarios de la nube, pero aún queda por establecer cuán viable es la realización de este protocolo en cuanto a facilidades técnicas y operativas.


\subsection{Factibilidad técnica}

Para el desarrollo de este trabajo terminal, se cuenta con el software necesario para la implementación del protocolo criptográfico propuesto, ya que este existe y esta disponible para su uso y disponibilidad inmediata al desarrollo del protocolo. Cabe mencionar que los insumos que involucran todo el desarrollo del protocolo, se encuentran completas en tanto a funcionalidades, soportes, documentación, seguridad, etc. 
En cuanto a los conocimientos necesarios al protocolo, se cuentan con los suficientes que este protocolo necesita para su aplicación. Dichos conocimientos se han adquirido a lo largo de la estadía en la ingeniería mediante las clases recibidas en las instalaciones de la escuela o por la adquisición por medios externos. Ahora bien, un pequeño inconveniente para la aplicación del protocolo, es el desarrollo del software, ya que existen partes fundamentales del protocolo que requieren de nuevo conocimiento que aun no se adquiere y es necesario aprender, por tanto, existe una pequeña posibilidad de que esto signifique un retraso en la producción del protocolo. 

\begin{itemize}

\item \textbf{Lenguaje de programación:} para el desarrollo del sistema se estará trabajando con varios lenguajes de programación, la base de este desarrollo será Python, ya que es un lenguaje de fácil comprensión y con una lógica bastante familiar a lenguajes que anteriormente se habían trabajado, además de que Python nos permite trabajar primitivas criptográficas con una mayor facilidad. \\
\item \textbf{Sistema gestor de base de datos:} Se implementará MySQL como un manejador de base de datos, ya que es software libre y además se cuenta con una mayor experiencia de manejo y entendimiento. 
\\
De acuerdo con los requerimientos del sistema, los componentes necesarios para la implementación de este protocolo son: 

\item \textbf{Hardware} 
Se requiere de equipo de cómputo para poder llevar a cabo la codificación del protocolo y la configuración de los servidores que les darán soporte a las actividades realizadas en la interacción del usuario con el sistema. El equipo de trabajo cuenta con 3 computadoras personales (LAPTOP) que son las siguientes: 
\begin{longtable}{ | p{5cm} | p{10.5cm} |}

% aquí añadimos el encabezado de la primera hoja.
\hline
\multicolumn{2}{|c|}{\textbf{Componentes Físicos (Hardware)}} \\ \hline
\textbf{Componente} & \textbf{Características} \\
\hline \hline
\endfirsthead

% aquí añadimos el encabezado del resto de hojas.
\hline
\textbf{Componente} & \textbf{Características} \\
\hline \hline
\endhead

% aquí añadimos el fondo de todas las hojas, excepto de la última.
\multicolumn{2}{|c|}{Continúa en la siguiente página.}
\endfoot

% aquí añadimos el fondo de la última hoja.
\endlastfoot

Laptop HP Pavilion g4 & \begin{itemize}
\item Procesador: AMD A6-4400M APU 2.70Hz
\item Memoria RAM: 8.00GB 
\item Disco Duro: 750GB
\item Tipo Sistema: 64bits x64
\end{itemize} \\ \hline

Laptop Acer Aspire V5 & \begin{itemize}
\item Procesador: Intel(R) Celeron(R) 1.50GHz 
\item Memoria RAM: 2.00GB
\item Disco Duro: 250GB
\item Tipo Sistema: 64bits x64
\end{itemize} \\ \hline

Laptop HP probook & \begin{itemize}
\item Procesador: AMD Phenom(tm) ll X2 545 3.00GHz 
\item Memoria RAM: 4.00GB
\item Disco Duro: 350GB
\item Tipo Sistema: 64bits x64
\end{itemize} \\ \hline

Servidor ownCloud & \begin{itemize}
\item Servicio de alojamiento de archivos con almacenamiento en la nube
\item Servidores de instalación: PHP, SQLite. MySQL, PostgreSQL
\item Servidor de archivos: WebDAV
\item Calendario de sincronzación: CardDAV
\item Sistema operativo: MMultiplataforma
\end{itemize} \\ \hline
\caption{Componentes físicos}
\label{Hardware}
\end{longtable}

\item \textbf{Software}
Con respecto al software, no se pretende usar un sistema operativo en específico ya que el servicio de la nube es compatible con cualquier sistema operativo en que se esté desarrollando. Sin embargo, se cuenta con los siguientes sitemas operativos: 

\begin{table}[htb]
\centering
\begin{tabular}{| p{5cm} | p{10.5cm} |}
\hline
\multicolumn{2}{|c|}{\textbf{Softawe}} \\ \hline
\textbf{Tipo} & \textbf{Cantidad} \\
\hline \hline
S.O. Windows 8.1 Pro & 2\\ \hline
S.O. Windows 10 Pro & 1\\ \hline

\end{tabular}
\caption{Componentes Lógicos}
\label{Servidor de Llaves }
\end{table}
\end{itemize}



\subsection{Factibilidad operativa}
El uso e implantación de este protocolo criptográfico, tiene como principal objetivo el eliminar las duplicaciones de archivos que se almacenan en la nube y de igual manera el evitar los ataques de adversarios por fuerza bruta a la información de los usuarios en la nube, por lo cual resulta factible la operación del proyecto, ya que se esta proponiendo una solución de bajo costo con grandes eneficios.
Hoy en día va en aumento el número de usuarios de la nube, ya sean empresas, organizaciones, personas, etc. todos estos usuarios buscan su información rapido y de fácil acceso en cualquier lugar con una conexión a internet, y esto hace que también caumente la cantidad de información almacenada que en ocasiones está replicada en uno o mas usuarios.
Este protocolo pretende atender al problema del crecimiento en la infraestructura de la nube ofreciendo una solución para contrarestarlo y de esa manera más usuarios podrán tener acceso a la nube sin necesidad de aumentar a la infraestructura de esta.

\subsection{Factibilidad económica}
El estudio de factibilidad económica nos permite analizar los costo - beneficios monetarios que se obtendrán con el desarrollo del proyecto, ya que dicho protocolo en un largo plazo podría comenzar en producción industrial para su comercialización y districución en el mercado de las tecnologías de la información, ya que proveerá de servicios en el cómputo nube que hoy en día las empresas están optando por invertir en el y optimizar sus recursos y procesos del negocio. 

En cuanto al análisis de el gasto económico que se requiere para la implementación y la realización de pruebas del protocolo, existe un beneficio ya que todos los componentes para el desarrollo del sistema son libres, es decir que no se realizará la adquisición de licencias de desarrollo ni programas para la implementación. 
\\ El servidor que nos proveerá del almacenamiento en la nube de nombre \textbf{ownCloud.org} es de libre acceso y no existe restricción alguna para la utilización de este. Nos permite una libre manipulación y configuración de tal modo que podamos cumplir nuestros objetivos.


\subsection{Análisis de riesgos} 

El análisis de riesgos consiste en identificar los riesgos que este sistema puede tener en su implementación y desarrollo. Este análisis realizado a este trabajo terminal, se llevó a cabo bajo la metodología de análisis de riesgos presentada por Ian Sommerville en el libro Ingeniería del software ~\cite{sommerville}, dicho autor presenta los posibles riesgos identificados en un sistema y 3 indicadores (Prioridad, Probabilidad e Impacto) fundamentales para llevar a cabo la gestión de riesgos y así tener presente cuales son los riesgos más destacados en el proyecto para dimensionar las consecuencias que estos podrían traer consigo si llegaran a ocurrir. Para elaborar este análisis de riesgos, se evaluaron los impactos que estos riesgos pueden traer, mediante 5 escalas de impacto de un riesgo, dichas escalas son: 

\subsubsection{Escalas de impacto de un riesgo}
\begin{longtable}{| p{2.5cm} | p{2.5cm} | p{2.5cm} | p{2.3cm} | p{2.5cm} | p{2.5cm} |}

% aquí añadimos el encabezado de la primera hoja.
\hline
\multicolumn{6}{|c|}{\textbf{Escalas de impacto de un riesgo}} \\ \hline
\textit{\textbf{Objetivo del proyecto}} & \textbf{Muy bajo/ 0.05} & \textbf{Bajo/ 0.10} & \textbf{Moderado/ 0.20} & \textbf{Alto/ 0.40} & \textbf{Muy alto/ 0.80}\\
\hline \hline
\endfirsthead

% aquí añadimos el encabezado del resto de hojas.
\hline
\textit{\textbf{Objetivo del proyecto}} & \textbf{Muy bajo/ 0.05} & \textbf{Bajo/ 0.10} & \textbf{Moderado/ 0.20} & \textbf{Alto/ 0.40} & \textbf{Muy alto/ 0.80}\\
\hline \hline
\endhead

% aquí añadimos el fondo de todas las hojas, excepto de la última.
\multicolumn{6}{|c|}{Continúa en la siguiente página}
\endfoot

% aquí añadimos el fondo de la última hoja.
\endlastfoot


\textbf{Costo} & Aumento insignificante de costo & Aumento del costo <10\% & Aumento del costo 10 - 20\% & Aumento del costo 20 - 40\% & Aumento del costo >40\% \\ \hline
\textbf{Tiempo} & Aumento insignificante de tiempo & Aumento del tiempo <5\% & Aumento del tiempo 5 - 10\% & Aumento del tiempo 10 - 20\% & Aumento del tiempo >20\% \\ \hline
\textbf{Alcance} & Disminución del alcance apenas perceptible & Áreas de alcance secundarias afectadas & Áreas de alcance principales afectadas & Reducción del alcance inaceptable para los objetivos & El producto terminado es inservible\\ \hline
\textbf{Calidad} & Degradación de calidad apenas perceptible & Sólo las aplicaciones muy exigentes se ven afectadas & La reducción de la calidad requiere aprobación externa & Reducción de calidad inaceptable & El producto terminado es inservible\\ \hline

\caption{Escalas de impacto de un riesgo ~\cite{sommerville}} 
\label{Riesgos}
\end{longtable}


\begin{longtable}{| p{1cm} | p{4cm} | p{2cm} | p{2.5cm} | p{2cm} | p{3.5cm} |}

% aquí añadimos el encabezado de la primera hoja.
\hline
\multicolumn{6}{|c|}{\textbf{Análisis de riesgos}} \\ \hline
\textbf{ID} & \textbf{Riesgo} & \textbf{Prioridad} & \textbf{Probabilidad} & \textbf{Impacto} & \textbf{Causa}\\
\hline \hline
\endfirsthead

% aquí añadimos el encabezado del resto de hojas.
\hline
\textbf{ID} & \textbf{Riesgo} & \textbf{Prioridad} & \textbf{Probabilidad} & \textbf{Impacto} & \textbf{Causa}\\
\hline \hline
\endhead

% aquí añadimos el fondo de todas las hojas, excepto de la última.
\multicolumn{6}{|c|}{Continúa en la siguiente página.}
\endfoot

% aquí añadimos el fondo de la última hoja.
\endlastfoot

% aquí añadimos el cuerpo de la tabla.
R1 & Modificar requerimientos & ALTA & MEDIA & ALTO & Se agregan nuevos o modificación de requerimientos actuales \\ \hline
R2 & Cambios en tecnología & BAJA & MEDIA & BAJO & La tecnología usada es menos eficiente y causa conflictos \\ \hline
R3 & Falta de usuarios y peticiones & ALTA & BAJA & BAJO & No se localizaron todos los involucrados en el protocolo \\ \hline
R4 & Equipo de cómputo & ALTA & BAJA & MUY BAJO & El equipo de cómputo empleado falla o no se encuentra funcionando \\ \hline
R5 & Incumplimiento de acuerdos & ALTA & ALTA & MODERADO & Retraso en actividades programadas \\ \hline
R6 & Problemas de planeación & MEDIA & ALTA & ALTO & Falta de comunicación por parte del equipo \\ \hline
R7 & Falta de recursos & ALTA & MEDIA & MUY ALTO & No se cuenta con el poder adquisitivo de recursos e insumos \\ \hline
R8 & Falta de conocimientos & MEDIA & MEDIA & MUY ALTO & El equipo no se encuentra capacitado para el desarrollo del sistema. \\ \hline
R9 & Sobre estimación de insumos & MEDIA & MEDIA & MODERADO & Los insumos para la implementación del sistema no son los adeacuados para el desarrollo. 

\\ \hline
\caption{Análisis de riesgos del proyecto}
\label{Análisis de riesgos }
\end{longtable}


Dichos riesgos fueron considerados durante la realización de este proyecto, ya que se tomaron en cuanta todos los factores que se ven involucrados en el ambiente que se encuentra este trabajo terminal. Principalmente se tienen muy en cuenta el factor humano, es decir, los errores, mmodificaciones, alteraciones que el equipo de trabajo de este trabajo terminal pudiera cometer o que se encuentre en una situación que pueda comprometer el avance en tiempo y forma de este proyecto.\\ 

Así mismo, el riesg no puede ser mitigado en su totalidad y mucho menos evitar una afectación al desarrollo del trabajo terminal, pero con un plan de acción detallado para cada riesgo identificado se puede disminuir en gran medida las consecuencias que estos reisgos podrían generar, es por ello que se propone el siguiente plan de acción para cada riesgo: 


\begin{longtable}{| p{1cm} | p{5cm} | p{9.5cm} |}

% aquí añadimos el encabezado de la primera hoja.
\hline
\multicolumn{3}{|c|}{\textbf{Plan de acción para riesgos del proyecto}} \\ \hline
\textbf{ID} & \textbf{Riesgo} & \textbf{Acción a realizar} \\
\hline \hline
\endfirsthead

% aquí añadimos el encabezado del resto de hojas.
\hline
\textbf{ID} & \textbf{Riesgo} & \textbf{Acción a realizar} \\
\hline \hline
\endhead

% aquí añadimos el fondo de todas las hojas, excepto de la última.
\multicolumn{3}{|c|}{Continúa en la siguiente página.}
\endfoot

% aquí añadimos el fondo de la última hoja.
\endlastfoot

% aquí añadimos el cuerpo de la tabla.
R1 & Modificar requerimientos & Se cuenta como un requerimiento no funcional la mantenibilidad, en la cuál dice que cada nuevo requerimiento tendrá que ser analizado para cuantificar las implicaciones de este y su efectividad \\ \hline
R2 & Cambios en tecnología & En cuanto exista una nueva tecnología, se analizarán las ventajas y desventajas de ésta para posteriormente tomar una desición para actualizar o conservar dicha tecnología\\ \hline
R3 & Falta de usuarios y peticiones & El sistema tendrá como máximo 118ms de latencia, en caso de persistir el problema se volverá a realizar la petición y en el peor escenario se notificará del error al administrador del sistema para su correción \\ \hline
R4 & Equipo de cómputo & Cuando exista una falla en el equipo de cómputo que opera el sistema, se procederá a poner fuera de línea el sistema para poder cambiar o reparar el equipo que se encuentra dañado \\ \hline
R5 & Incumplimiento de acuerdos & En caso de retrazo en actividades programadas, se procederá a una reunión con el equipo de trabajo para dar prioridades a las actividades y avanzar en un mínimo periódo de tiempo \\ \hline
R6 & Problemas de planeación & En caso de presentarse la falta o erronea comunicación en el equipo, se procederá a una reunión con todo el equipo para revisar los incidentes y re plantear las actividades \\ \hline
R7 & Falta de recursos & A falta de recursos, se buscará la adquisición de estos a costos más bajos a los actuales o se tendrá que adquirir una deuda con un acreedor ajeno al proyecto \\ \hline
R8 & Falta de conocimientos & Cuando se presente este problema, el equipo debe inmediatamente reunirse para poder planificar cursos de capacitación, talleres, conferencias, etc. \\ \hline
R9 & Sobre estimación de insumos & Los insumos utilizados en el proyecto están especificados desde el inicio del proyecto, en caso de que esta especificación falle se tendrá que realizar una nueva valoración de los insumos que sean necesarios.

\\ \hline
\caption{Plan de acción ante riesgos en el proyecto}
\label{Análisis de riesgos }
\end{longtable}

%=============================================================================================================================================================


\section{Arquitectura del sistema. }

\begin{figure}[H]
\centering
\includegraphics[width=17cm, height=10cm]{./images/Arqui.jpg}
\caption{Arquitectura general del Protocolo}

\end{figure}

En este apartado se presenta la arquitectura general del protocolo criptográfico, dicha arquitectura tiene como base de desarrollo al protocolo Dupless que se menciona en este documento. Dupless provee a esta arquitectura la implementación de un servidor de llaves $KS$ para evitar los duplicados en la Nube garantizando la confidencialidad e integridad de toda la información almacenada por los usuarios del protocolo. Esta arquitectura se compone de 3 importantes entidades que son: 
\begin{itemize}
	\item \textbf{Servidor de Llaves $KS$: } Dicha entidad será la responsable de proveer firmas para generar claves específicas para cifrar cada archivo diferente $M$ a almacenar por un usuario en la Nube.
	\item \textbf{Cliente: } Esta entidad corresponde al lado del usuario, el cuál almacenará, descargará y consultará archivos en la Nube, además de realizar procedimientos necesarios para la gestión de un archivo $M$. 
	\item \textbf{La Nube: } La entidad Nube, es el almacenamiento en línea en el cuál se estarán gestionando archivos por diferentes usuarios que tienen acceso a este servicio. De igual manera, esta entidad será la encargada de detectar los duplicados generados por usuarios.
\end{itemize}

\begin{figure}[H]
\centering
\includegraphics[width=15cm, height=8cm]{./images/Paso01.jpg}
\caption{Arquitectura del Protocolo paso 1.}

\end{figure}
\begin{itemize}
	\item \textbf{Generación de claves de Usuario: } El protocolo genera al usuario a través del algoritmo de clave pública RSA un par de claves: \textit{pública} $(pk)$ y \textit{privada} $(sk)$ las cuales serán almacenadas en un certificado digital para su uso posterior. Dicha generación se realiza cuando un usuario se registra por primera vez al protocolo criptográfico. Estas claves servirán a dicho usuario para poder realizar cualquier procedimiento de gestión de archivos en la Nube. 
	\item \textbf{Generación de claves del Servidor $KS$: } El protocolo genera al servidor de llaves su propio par de claves, una \textit{pública} \textit{(e)} que puede distribuirse libremente entre varios usuarios y una \textit{privada} \textit{(d)}que permanece sólo en el servidor de llaves. Dichas claves son generadas a través del algoritmo de clave pública RSA. 
	\item Posteriormente, cuando el usuario desea  almacenar un archivo $M$ en la nube comienza un proceso el cuál se muestra a continuación: 
		\begin{enumerate}
			\item El protocolo obtiene del servidor $KS$ la clave pública \textit{e} y se realiza una comparación con \textit{e $\leq$ N}, $N$ fue el producto de los 2 números primos utilizados en la generación de llaves del servidor. Si la comparación no se cumple, el protocolo envía un error.
			\item Se elige un número entero aleatorio, tal que $r<N$.
			\item El usuario genera la función hash $H(M)$ del archivo $M$ 
			\item El cliente realiza la operación \textit{x ← h $\cdot$ r$^e$ $\bmod$ N}, ya que así se mantiene oculto el mensaje que firmará el servidor. 
			\item La $x$ obtenida de la operación anterior, es enviada al servidor $KS$ para realizar la firma a ciegas.
		\end{enumerate}
\end{itemize}


\begin{figure}[H]
\centering
\includegraphics[width=16cm, height=13cm]{./images/Paso02.jpg}
\caption{Arquitectura del Protocolo paso 2.}

\end{figure}

El cliente envía al servidor $KS$ el archivo $x$ que se requiere firmar para continuar con el proceso de almacenameitno de archivo.\\ \\
El servidor recibe a \textit{x} que corresponde a la función hash del archivo $M$. Para poder realizar la firma, es necesario que el servidor realice una operación con su llave privada $d$. Dicha firma es a ciegas ya que el servidor no conoce el contenido del archivo $M$ ni el usuario que esta solicitando dicha firma. \\ \\
El proceso se puede representar de la siguiente manera: \hspace{2cm} \textit{y ← x$^d$ $\bmod$ N} \\ \\
Posteriormete, el servidor envía al cliente la firma obtenida $y$




\begin{figure}[H]
\centering
\includegraphics[width=16cm, height=10cm]{./images/Paso03.jpg}
\caption{Arquitectura del Protocolo paso 3.}
\end{figure}

Ahora que el cliente recibió la firma $y$ generada por el servidor $KS$ puede continuar con el proceso de almacenamiento de archivo. \\ \\
Lo que hace el cliente es obtener el valor de $z$, y se lleva a cabo de la siguiente manera: \hspace{2cm} \textit{z ← y $\cdot$ r$^{-1}$ $\bmod$ N}.  




\begin{figure}[H]
\centering
\includegraphics[width=16cm, height=10cm]{./images/Paso3_5.jpg}
\caption{Arquitectura del Protocolo paso 4.}

\end{figure}

Para continuar con el almacenamiento de un archivo $M$, es necesario realizar una verificación de la procedencia de la firma realizada en el servidor $KS$. En este paso se corrobora la firma, es decir, verifica que efectivamente sea el servidor de llaves $KS$ la entidad que realizo la firma a ciegas al archivo $M$ que el cliente estaba solicitando. También en este paso se asegura que el archivo firmado por el servidor $KS$ sea el que el cliente envió para su solicitud de almacenamiento. \\ \\
La verificación se lleva a cabo de la siguiente manera: 
\begin{itemize}
\item Se realiza la operación $z^e \bmod N $, para eliminar el factor de ocultamiento realizado por el cliente. Así se comprueba que la misma función hash generada en el cliente es igual a la que estaba bajo el factor de ocultamiento, si estas son iguales entonces se verifica que efectivamente el servidor $KS$ fue el responsable de la firma $y$ obtenida. 
\item Si se realiza la operación \textit{z $^e$ $\bmod$ N} y el resultado en la comparación de las funciones hash no es el mismo, entonces el servidor no llevó a cabo correctamente el proceso de firmado.

\end{itemize}


\begin{figure}[H]
\centering
\includegraphics[width=16cm, height=11cm]{./images/Paso04.jpg}
\caption{Arquitectura del Protocolo paso 5.}

\end{figure}

Para continuar, el cliente ya verificó la procedencia de la firma y obtuvo la clave $z$ que será la utilizada para llevar a cabo el proceso de cifrado. \\ \\
En este paso, el cliente se encarga del cifrado llamado $C1$ del archivo original $M$ junto con la clave generada $z$ a través del proceso entre el cliente y el servidor $KS$. De igual manera, realiza el cifrado llamado $C2$ de la clave $z$ junto con la clave privada $pk$ del usuario que desea almacenar un archivo. Dichas operaciones se representan de la sigueinte manera: 

\begin{itemize}
	\item $C1$ ← $E_{z}(M)$
	\item $C2$ ← $E_{pk}(z)$
\end{itemize}



\begin{figure}[H]
\centering
\includegraphics[width=16cm, height=13cm]{./images/Paso05.jpg}
\caption{Arquitectura del Protocolo paso 6.}

\end{figure}

El siguiente paso es realizar una función hash al archivo cifrado que se obtuvo en el paso anterior.\\ \\ 

Dicha función hash $H(C1)$ corresponde al cifrado del archivo $M$, con esta función se obtiene un identificador del archivo $M$, el cuál servirá para detectar los posibles duplicados del archivo $M$ en la Nube.

\begin{itemize}
	\item Si dicho identificador se encuentra ya almacenado en la Nube: Se procede al almacenamiento del cifrado $C2$ correspondiente a la clave privada del usuario que llevó a cabo todo el proceso, actualizando y asociando la lista de archivos que ahora el usuario tiene registrados en la Nube.
	\item Si el identificador no se encontró en el almacenamiento de la Nube: Se procede a almacenar el cifrado $C1$ y cifrado $C2$, actualizando y asociando la lista de archivos que ahora el usuario tiene registrados en la Nube.
\end{itemize}




\begin{figure}[H]
\centering
\includegraphics[width=16cm, height=10cm]{./images/Paso06.jpg}
\caption{Arquitectura del Protocolo paso 7.}

\end{figure}

En este caso de la detección de duplicados, se encontró una copia almacenada del archivo $M$ por lo que sólo se almacena el cifrado $C2$ correspondiente a la clave privada del usuario que llevó a cabo todo el proceso y se actualiza la lista de archivos que ahora el usuario tiene registrados en la Nube.


\begin{figure}[H]
\centering
\includegraphics[width=16cm, height=10cm]{./images/Paso07.jpg}
\caption{Arquitectura del Protocolo paso 8.}

\end{figure}


En este caso de la detección de duplicados, no se encontró ninguna almacenada del archivo $M$ por lo que se almacena el cifrado $C1$ y el cifrado $C2$  y se actualiza la lista de archivos que ahora el usuario tiene registrados en la Nube.\\ \\

%=============================================================================================================================================================
\section{Descripción de procesos. }

\subsection{Descripción del proceso subir archivo.}

El proceso inicia cuando el cliente desea subir un archivo nuevo, el cliente debe dar clic en la opción de subir archivo y seleccionar el archivo que desee subir, el sistema va a calcular el hash del archivo elegido, después hará unas operaciones aritméticas con el hash para generar una $x$ que se enviara al servidor para que realice una firma a ciegas, y con esta firma que se le regresará al cliente, se va a generar del lado del cliente su llave $k$ que será la llave con la cual cifrará el archivo, y así si otro archivo que se quiera subir es igual a este tendrá la misma $k$ y podrá el sistema detectar que son duplicados, también el sistema va a cifrar la llave $k$ por si se le llega a perder al cliente, para poder almacenarlo en la nube el sistema mandara el hash del archivo cifrado para ver si ya está registrado en la base de datos, si es así solo guarda la llave y actualiza la lista de los usuario que comparten el archivo, de lo contrario solicita la llave cifrada y el archivo cifrado para almacenarlos y actualiza su lista de usuario añadiendo un archivo en ella, y por último se le notificará al cliente que su archivo ha sido almacenado.



% - - - - - - - - - - - - - - - - - - - - - - - - -
\subsubsection{Participantes}

\begin{tabular}{ |p{2cm}|p{6cm}|p{6cm}| }
\hline
\multicolumn{3}{|c|}{ Participantes } \\
\hline

{ Nombre } & { Descripción } & { Responsabilidades} \\
\hline
{ Servidor } & Actor que realiza la firma a ciegas del archivo. & 
\begin{itemize} 
\item Firma a ciegas.

\end{itemize} \\ 
\hline
{ Cliente } & Actor que sube archivos a la Nube. & 
\begin{itemize} 
\item Selecciona archivo a subir.
\item Genera hash del archivo. 
\item Calcula la llave k.
\item Cifra los archivos a subir.
\end{itemize} \\ 
\hline
{ Nube } & Actor que almacena los archivos. & 
\begin{itemize} 
\item Almacena los archivos seleccionados.
\item Genera lista de usuarios relacionados.
\end{itemize} \\ 
\hline
\end{tabular}


\begin{figure}[H]
\centering
\includegraphics[width=17cm, height=7cm]{./images/BPM_Subir.png}
\caption{BPMN Subir archivo.}

\end{figure}


\subsection{Descripción del proceso Descargar archivo.}

El proceso inicia cuando el cliente da clic en la opción de descargar archivo y seleccionar el archivo a descargar, el sistema va a mandar el nombre del archivo a la nube para que busque en su base de datos los archivos correspondientes al usuario y nombre del archivo, se le regresarán al cliente y el sistema en el lado del cliente deberá descifrar el archivo $C2$ que contiene la llave $k$ para poder descifrar el otro archivo $C1$ donde se encuentra el archivo original, el sistema notificara al cliente que su archivo se ha descargado con éxito y este podrá abrirlo. \\


% - - - - - - - - - - - - - - - - - - - - - - - - -
\subsubsection{Participantes}

\begin{tabular}{ |p{2cm}|p{6cm}|p{6cm}| }
\hline
\multicolumn{3}{|c|}{ Participantes } \\
\hline

{ Nombre } & { Descripción } & { Responsabilidades} \\
\hline
{ Cliente } & Actor que descarga archivos de la Nube. & 
\begin{itemize} 
\item Selecciona archivo a descargar.
\item Descifra los archivos descargados.
\end{itemize} \\ 
\hline
{ Nube } & Actor que almacena los archivos. & 
\begin{itemize} 
\item Almacena los archivos seleccionados.
\item Genera lista de usuarios relacionados.
\item Enviar los archivos a descargar.
\end{itemize} \\ 
\hline
\end{tabular}

\begin{figure}[H]
\centering
\includegraphics[width=16cm, height=7cm]{./images/BPM_Descargar.png}
\caption{BPMN Descargar archivo.}

\end{figure}

\vspace{3cm}
\subsection{Descripción del proceso eliminar archivo.}

El proceso inicia cuando el cliente desea eliminar un archivo nuevo, el cliente debe dar clic en la opción de eliminar archivo y seleccionar el archivo que desee eliminar, el sistema va a enviar el nombre del archivo a la nube donde este buscará en su base de datos los archivos que corresponden al usuario y nombre del archivo, los va a eliminar de su base de datos y actualizará su lista de usuarios eliminado de ella los datos del archivo y usuario que coinciden con el archivo eliminado, se le enviará una notificación al cliente que su archivo ha sido eliminado con éxito de la nube.\\



% - - - - - - - - - - - - - - - - - - - - - - - - -
\subsubsection{Participantes}

\begin{tabular}{ |p{2cm}|p{6cm}|p{6cm}| }
\hline
\multicolumn{3}{|c|}{ Participantes } \\
\hline

{ Nombre } & { Descripción } & { Responsabilidades} \\
\hline
{ Cliente } & Actor que elimina archivos de la Nube. & 
\begin{itemize} 
\item Selecciona archivo a eliminar.
\end{itemize} \\ 
\hline
{ Nube } & Actor que almacena los archivos. & 
\begin{itemize} 
\item Elimina los archivos seleccionados.
\item Genera lista de usuarios relacionados.
\end{itemize} \\ 
\hline
\end{tabular}

\begin{figure}[H]
\centering
\includegraphics[width=16cm, height=7cm]{./images/BPM_Eliminar.png}
\caption{BPMN Eliminar archivo.}

\end{figure} 

\newpage
%=======================================================================================================================================
\section{Modelo de entidades. }

\subsection{Diagrama de Entidad Relación. }

\begin{figure}[H]
\centering
\includegraphics[width=16cm, height=10cm]{./images/BDTT2.png}
\caption{Diagrama Entidad relación del sistema.}

\end{figure} 

\newpage

\subsection{Diagrama de clases. }

\begin{figure}[H]
\centering
\includegraphics[width=18cm, height=15cm]{./images/DiagramaClasesTT.png}
\caption{Diagrama de clases del sistema.}

\end{figure} 
\newpage
%=======================================================================================================================================
\section{Requerimientos Funcionales. }

\begin{table}[htb]
\centering
\begin{tabular}{| p{2cm} | p{13.5cm} |}
\hline
\multicolumn{2}{|c|}{\textbf{Requerimientos funcionales del protocolo}} \\ \hline
\textbf{ID} & \textbf{Descripción} \\
\hline \hline
RF1 & El sistema permitirá el registro de un nuevo usuario \\ \hline
RF2 & El sistema permitirá al usuario iniciar sesión para comenzar a manipular su información \\ \hline
RF3 & El sistema permitirá al usuario gestionar su perfil para la visualización, actualización y configuración de su información \\ \hline
RF4 & El sistema permitirá al usuario gestionar los archivos que dicho usuario tiene registrado en su perfil \\ \hline

\end{tabular}
\caption{Requerimientos funcionales del servidor de llaves}
\label{Servidor de Llaves }
\end{table}




\begin{table}[htb]
\centering
\begin{tabular}{| p{2cm} | p{13.5cm} |}
\hline
\multicolumn{2}{|c|}{\textbf{Servidor de Llaves}} \\ \hline
\textbf{ID} & \textbf{Descripción} \\
\hline \hline
RF – SLL1 &El sistema permitirá la generación de llaves de usuario a través de las llaves pública y privada del servidor de llaves \\ \hline
RF – SLL2 & El sistema permitirá la firma a ciegas (y) de cualquier archivo que se desee almacenar\\ \hline
\end{tabular}
\caption{Requerimientos funcionales del servidor de llaves}
\label{Servidor de Llaves }
\end{table}


\begin{table}[htb]
\centering
\begin{tabular}{| p{2cm} | p{13.5cm} |}
\hline
\multicolumn{2}{|c|}{\textbf{Cliente}} \\ \hline
\textbf{ID} & \textbf{Descripción} \\
\hline \hline
RF – CL1 & El sistema permitirá al usuario gestionar archivos: Subir, Descargar, Eliminar \\ \hline
RF – CL2 & El sistema permitirá al usuario subir un archivo (F) cifrado al servicio de almacenamiento \\ \hline
RF – CL3 & El sistema permitirá al usuario descargar un archivo (F) descifrado elegido de su lista de archivos en el servicio de almacenamiento. \\ \hline
RF – CL4 &El sistema permitirá al usuario eliminar un archivo (F) cuando el usuario elige alguno de su lista de archivos cargados en el servicio de almacenamiento. \\ \hline
\end{tabular}
\caption{Requerimientos funcionales del cliente}
\label{Cliente }
\end{table}


\begin{table}[htb]
\centering
\begin{tabular}{| p{2cm} | p{13.5cm} |}
\hline
\multicolumn{2}{|c|}{\textbf{Servicio de almacenamiento (Nube)}} \\ \hline
\textbf{ID} & \textbf{Descripción} \\
\hline \hline

RF – N1 & El sistema permitirá al servicio de almacenamiento llevar a cabo un proceso para la detección de archivos duplicados. \\ \hline

\end{tabular}
\caption{Requerimientos funcionales del Servicio de almacenamiento (Nube)}
\label{Servicio de almacenamiento (Nube) }
\end{table}
%=======================================================================================================================================
\vspace{9cm}
\section{Requerimientos No Funcionales }
\begin{longtable}{| p{1.5cm} | p{3cm} | p{11cm} |}

% aquí añadimos el encabezado de la primera hoja.
\hline
\multicolumn{3}{|c|}{\textbf{Requerimientos No Funcionales}} \\ \hline
\textbf{ID} & \textbf{Atributo} & \textbf{Descripción}\\
\hline \hline
\endfirsthead

% aquí añadimos el encabezado del resto de hojas.
\hline
\textbf{ID} & \textbf{Atributo} & \textbf{Descripción}\\
\hline \hline
\endhead

% aquí añadimos el fondo de todas las hojas, excepto de la última.
\multicolumn{3}{|c|}{Continúa en la siguiente página}
\endfoot

% aquí añadimos el fondo de la última hoja.
\endlastfoot

% aquí añadimos el cuerpo de la tabla.
RNF1 & Eficiencia & \begin{itemize} 
\item El servidor de llaves tendrá la capacidad de realizar 1000 peticiones de gestión de almacenamiento de archivos por segundo. 
\item El sistema podrá funcionar de forma correcta con usuarios conectados de manera concurrente. 
\item Los archivos que sean gestionados dentro del servidor de almacenamiento, deben ser actualizados en la base datos y la visualización de cada cliente de manera casi inmediata. 
\end{itemize}
\\ \hline

RNF2 & Fiabilidad & \begin{itemize} 
\item La pérdida de consultas en el servidor de llaves es menor a 3 veces el máximo de consultas realizadas. 
\item Los archivos almacenados en el servidor de almacenamiento deben ser recuperados por el usuario al instante en que este lo solicite. 
\item El tiempo de latencia que existe entre el servidor de llaves y el cliente será de máximo 118ms. 
\end{itemize}
\\ \hline

RNF3 & Seguridad & \begin{itemize} 
\item El sistema almacenará los datos de los usuarios y sus contraseñas en una base de datos MySQL, dichos datos serán modificados mínimo 2 veces al año. 
\item Se autenticarán los clientes antes de comenzar el proceso de generación de llaves de archivo. 
\item El servidor de llaves firmará claves para un sólo mensaje a la vez sin saber el contenido de éste. 
\item El inicio de sesión de usuarios estará protegido en un canal seguro utilizando algoritmos criptográficos. 
\item Las funciones hash de archivos a almacenar utilizarán la función criptográfica SHA-(256)
\item Los formularios para ingresar datos al sistema estarán validados por tipo de dato, longitud e internamente se utilizará un ORM (Object Relational Maping) para evitar inyecciones SQL. 
\end{itemize}

\\ \hline 
RNF4 & Mantenibilidad & \begin{itemize}
\item Cualquier nuevo requerimiento funcional o no funcional tendrá que ser analizado y diseñado para poder cuantificar las implicaciones que este tendrá sobre el funcionamiento del sistema. 
\item El sistema contará con un plan de pruebas que facilitará la identificación de posibles fallas existentes en el funcionamiento de este. 
\end{itemize}

\\ \hline
RNF5 & Usabilidad & \begin{itemize}
\item El tiempo de aprendizaje del sistema por un usuario deberá ser menor a 15 días. 
\item El sistema debe proporcionar mensajes de error que sean informativos y orientados al usuario final. 
\item El sistema debe poseer interfaces gráficas bien formadas.
\end{itemize}

\\ \hline
RNF6 & Extensibilidad & \begin{itemize}
\item El sistema podrá tener un crecimiento a futuro ya que este será programado por módulos lo cual hará más fácil su crecimiento.
\end{itemize}
\\ \hline
\caption{Requerimientos no funcionales del sistema}
\label{Requerimientos no funcionales }
\end{longtable}
%=======================================================================================================================================
\section{Reglas de Negocio}

\begin{BussinesRule}{RN1}{Datos requeridos} 
\BRitem[Descripción:] El usuario debe ingresar toda la información marcada como requerida en el modelo conceptual del negocio.
\BRitem[Tipo:] Restricción de operación. 
\end{BussinesRule}

\begin{BussinesRule}{RN2}{Datos correctos} 
\BRitem[Descripción:] La información que el usuario proporcione, debe ser del tipo y longitud definida en el modelo conceptual del negocio.
\BRitem[Tipo:] Restricción de operación. 
\end{BussinesRule}

\begin{BussinesRule}{RN3}{Unicidad de elementos} 
\BRitem[Descripción:] Hay ciertos elementos que no pueden repetirse, ya sea por ser idénticos o por coincidir en uno o más datos. Esto se define como dato único en la tabla de atributos del modelo conceptual del negocio para cada entidad.
\BRitem[Tipo:] Restricción de operación. 
\end{BussinesRule}

\begin{BussinesRule}{RN4}{Usuario registrado} 
\BRitem[Descripción:] El usuario debe tener una cuenta activa en el sistema.
\BRitem[Tipo:] Hecho
\end{BussinesRule}
